(()=>{"use strict";function e(e,t,n,r){var o=document.querySelector("#card-template").content.cloneNode(!0);return o.querySelector(".card__title").textContent=e.name,o.querySelector(".card__image").src=e.link,o.querySelector(".card__image").alt=e.alt,o.querySelector(".card__delete-button").addEventListener("click",t),o.querySelector(".card__image").addEventListener("click",n),o.querySelector(".card__like-button").addEventListener("click",r),o}function t(e){e.target.closest(".card").remove()}function n(e){e.target.classList.toggle("card__like-button_is-active")}function r(e){e.classList.add("popup_is-animated"),window.addEventListener("keydown",c),setTimeout((function(){e.classList.add("popup_is-opened")}),60)}function o(e){e.classList.remove("popup_is-opened"),window.removeEventListener("keydown",c),setTimeout((function(){e.classList.remove("popup_is-animated")}),60)}function c(e){if("Escape"===e.key){var t=document.querySelector(".popup.popup_is-opened");t&&o(t)}}var a=document.querySelector(".places__list"),p=document.querySelector(".popup_type_edit"),u=document.querySelector(".popup_type_new-card");document.querySelector(".popup_type_image"),document.querySelector(".cards-container"),function(t,n,r,o){[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg",alt:"изображение Архыза"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg",alt:"изображение Челябинской области"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg",alt:"изображение Иваново"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg",alt:"изображение Камчатки"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg",alt:"изображение Холмогорского района"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg",alt:"изображение Байкала"}].forEach((function(t){var c=e(t,r,o);n.appendChild(c)}))}(0,a,t,n),document.querySelector(".profile__edit-button").addEventListener("click",(function(){l.value=d.textContent,s.value=_.textContent,r(p)})),document.querySelector(".profile__add-button").addEventListener("click",(function(){return r(u)})),document.querySelectorAll(".popup__close").forEach((function(e){e.addEventListener("click",(function(e){o(e.currentTarget.closest(".popup"))}))})),document.querySelectorAll(".popup").forEach((function(e){!function(e){e.addEventListener("click",(function(t){t.target.closest(".popup__content")||o(e)}))}(e)}));var i=document.getElementsByName("edit-profile"),l=document.querySelector(".popup__input_type_name"),s=document.querySelector(".popup__input_type_description"),d=document.querySelector(".profile__title"),_=document.querySelector(".profile__description");i.addEventListener("submit",(function(e){e.preventDefault();var t=l.value,n=s.value;d.textContent=t,_.textContent=n,o(document.querySelector(".popup_type_edit"))}));var m=document.querySelector('.popup__form[name="new-place"]');function y(e){var t=e.target;if(t.classList.contains("card__image")){var n=t.closest(".places__item").querySelector(".card__title").innerText,o=t.getAttribute("src"),c=t.getAttribute("alt"),a=document.querySelector(".popup_type_image");a.querySelector(".popup__image").setAttribute("src",o),a.querySelector(".popup__image").setAttribute("alt",c),a.querySelector(".popup__caption").textContent=n,r(a)}}m&&m.addEventListener("submit",(function(r){r.preventDefault();var c=this.elements["place-name"],a=this.elements.link;if(c.value&&a.value){var p=e({name:c.value,link:a.value,alt:"изображение "+c.value},t,y,n),u=document.querySelector(".places__list");u&&u.prepend(p),o(this.closest(".popup")),this.reset()}else alert("Пожалуйста, заполните все поля!")}))})();